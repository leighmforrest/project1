{% extends 'base.html' %}

{% block title %}{{ super() }} - Welcome{% endblock%}

{% block modal %}
  {% include 'partials/_rating_modal.html' %}
{% endblock %}

{% block content %}
<div class="container">
        {% include 'macros/_flashmessages.html' %}
    <div class="row">
        <div class="col-md-8 mb-2">
            <div class="card text-center">
              <div class="card-header">
                <h5>{{ book.title }}</h5>
              </div>
              <div class="card-body">
                <p class="card-text">{{ book.name }}</p>
                <a class="btn btn-primary" href="#" data-toggle="modal" data-target="#pageModal" }}">Leave a Rating</a>
              </div>
              <div class="card-footer text-muted">
              </div>
            </div>
        </div>
        <div class="col-md-4 mb-2">
            <div class="card text-center">
              <div class="card-header">
                <h5>goodreads</h5>
              </div>
              <div class="card-body">
                <p class="card-text">averge rating: {{ goodreads.average_rating }}</p>
                <p class="card-text">total ratings: {{ goodreads.work_ratings_count }}</p>
              </div>
              <div class="card-footer text-muted">
              </div>
            </div>
        </div>
    </div>
    <div class="row mt-3">
        <div class="col-md-12">
            <div class="card">
              <ul class="list-group list-group-flush">
                {% for rating in ratings %}
                <li class="list-group-item">
                    <span class="font-weight-bold">{{ rating.handle }}</span>
                    <span class="badge badge-pill badge-primary">
                        {{ rating.rating }}
                    </span>
                    {{ rating.comment }}</li>
                {% endfor %}
              </ul>
            </div>
        </div>
    </div>
</div>
{% endblock %}
